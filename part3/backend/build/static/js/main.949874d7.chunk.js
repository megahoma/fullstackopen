(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{21:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(15),r=n.n(s),a=(n(21),n(3)),o=n(0),i=function(e){var t=e.filter,n=e.setFilter;return Object(o.jsxs)("div",{children:["filter:",Object(o.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},u=n(16),j=n(4),d=n.n(j),l="/api/persons",b=function(){return d.a.get(l)},f=function(e){return d.a.post(l,e)},h=function(e){return d.a.delete("".concat(l,"/").concat(e))},O=function(e,t,n){return d.a.put("".concat(l,"/").concat(e),{id:e,name:t,number:n})},m=function(e){var t=e.persons,n=e.newName,c=e.newPhone,s=e.setPersons,r=e.setNewName,a=e.setNewPhone;return Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var o,i=Object(u.a)(t);try{for(i.s();!(o=i.n()).done;)for(var j=o.value,d=0,l=Object.values(j);d<l.length;d++){var b=l[d];if(n===b)return void(window.confirm("".concat(n," is already added to phonebook, replace the old number with a new one?"))&&O(j.id,n,c).then((function(e){s(e.data),r(""),a("")})))}}catch(m){i.e(m)}finally{i.f()}var h={id:Math.random(),name:n,number:c};f(h).then((function(e){s(t.concat(e.data)),r(""),a("")}))},children:[Object(o.jsxs)("div",{children:["name:"," ",Object(o.jsx)("input",{value:n,onChange:function(e){r(e.target.value)}})]}),Object(o.jsxs)("div",{children:["number:"," ",Object(o.jsx)("input",{value:c,onChange:function(e){a(e.target.value)}})]}),Object(o.jsx)("button",{type:"submit",children:"add"})]})},x=function(e){var t=e.person,n=e.filter,c=e.setMessage,s=e.setPersons;return-1!==t.name.indexOf(n)?Object(o.jsxs)("tr",{id:t.id,children:[Object(o.jsx)("td",{children:t.name}),Object(o.jsx)("td",{children:t.number}),Object(o.jsx)("td",{children:Object(o.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(t.name," ?"))&&h(t.id).then((function(e){s(e.data),c({text:"".concat(t.name," has removed"),type:"success"}),setTimeout((function(){c(null)}),3e3)})).catch((function(e){c({text:"".concat(t.name," was already remov from server"),type:"error"}),setTimeout((function(){c(null)}),3e3)}))},children:"delete"})})]}):Object(o.jsx)(o.Fragment,{})},v=function(e){var t=e.persons,n=e.filter,c=e.setMessage,s=e.setPersons;return Object(o.jsx)("table",{children:Object(o.jsx)("tbody",{children:t.map((function(e){return Object(o.jsx)(x,{person:e,filter:n,setMessage:c,setPersons:s},e.id)}))})})},p=function(e){var t=e.message;return null===t?null:Object(o.jsx)("div",{className:"notification notification_".concat(t.type),children:t.text})},w=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(""),u=Object(a.a)(r,2),j=u[0],d=u[1],l=Object(c.useState)(""),f=Object(a.a)(l,2),h=f[0],O=f[1],x=Object(c.useState)(""),w=Object(a.a)(x,2),g=w[0],P=w[1],y=Object(c.useState)(null),N=Object(a.a)(y,2),S=N[0],k=N[1];return Object(c.useEffect)((function(){b().then((function(e){return s(e.data)}))}),[]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(p,{message:S}),Object(o.jsx)(i,{filter:g,setFilter:P}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(m,{persons:n,newName:j,newPhone:h,setPersons:s,setNewName:d,setNewPhone:O}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(v,{persons:n,filter:g,setMessage:k,setPersons:s})]})};r.a.render(Object(o.jsx)(w,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.949874d7.chunk.js.map